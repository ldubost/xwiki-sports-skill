<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc version="1.3" reference="Sports.Code.JSON" locale="">
  <web>Sports.Code</web>
  <name>JSON</name>
  <language/>
  <defaultLanguage>en</defaultLanguage>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1546297200000</creationDate>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1546297200000</date>
  <contentUpdateDate>1546297200000</contentUpdateDate>
  <version>1.1</version>
  <title/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>{{groovy}}
  import groovy.json.JsonOutput;

  def player = "nadal"
  if (request.player)
   player = request.player

  def sg = xwiki.parseGroovyFromPage("Sports.Code.Groovy")
  sg.setXWiki(xwiki, xcontext)
  sg.addSource([ "url" : "https://en.wikipedia.org/wiki/2019_French_Open_%E2%80%93_Men%27s_Singles?action=raw", "sport" : "tennis", "type" : "0", "code" : "Sports.Code.Tennis", "gameSpace" : "Sports.Tennis.Games", "playerSpace" : "Sports.Tennis.Players", "competition" : "Sports.Tennis.RolandGarros", "year" : "2019"])
  sg.addSource([ "url" : "https://en.wikipedia.org/wiki/2019_French_Open_%E2%80%93_Women%27s_Singles?action=raw", "sport" : "tennis", "type" : "1", "code" : "Sports.Code.Tennis", "gameSpace" : "Sports.Tennis.Games", "playerSpace" : "Sports.Tennis.Players", "competition" : "Sports.Tennis.RolandGarros", "year" : "2019"])
  sg.addSource([ "url" : "https://en.wikipedia.org/wiki/2019_FIVB_Volleyball_Men%27s_Nations_League?action=raw", "sport" : "volley-ball", "type": "0", "code" : "Sports.Code.VolleyBall", "gameSpace" : "Sports.Volley-Ball.Games", "playerSpace" : "Sports.Volley-Ball.Teams", "competition" : "Sports.Volley-Ball.VolleyBallNationsLeague", "year" : "2019"])
  sg.addSource([ "url" : "https://fr.wikipedia.org/wiki/Coupe_du_monde_f%C3%A9minine_de_football_2019?action=raw", "sport" : "football", "type": "1", "code" : "Sports.Code.Football", "gameSpace" : "Sports.Football.Games", "playerSpace" : "Sports.Football.Teams", "competition" : "Sports.Football.FootballWomenWorldCup", "year" : "2019"])
  

  def json = sg.getResults(player, request.sport, request.type)
  print "{{{${JsonOutput.toJson(json)}}}}"
{{/groovy}}</content>
</xwikidoc>
