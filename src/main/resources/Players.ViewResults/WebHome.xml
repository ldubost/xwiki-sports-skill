<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc version="1.3" reference="Players.ViewResults.WebHome" locale="">
  <web>Players.ViewResults</web>
  <name>WebHome</name>
  <language/>
  <defaultLanguage>en</defaultLanguage>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1546297200000</creationDate>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1546297200000</date>
  <contentUpdateDate>1546297200000</contentUpdateDate>
  <version>1.1</version>
  <title/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>{{html clean=false}}
&lt;script type="text/javascript"&gt;
require(['jquery'], function($) {

  function speak(text) {
    var synth = window.speechSynthesis;
    var utterThis = new SpeechSynthesisUtterance(text);
    synth.speak(utterThis);
  }

  function go(form) {
       speak("retrieving results for player " + form.player.value);
       var type = form.type.checked ? "1" : "0"
       var url = "/xwiki/bin/get/Players/ViewResults/JSON?outputSyntax=plain&amp;type=" + type + "&amp;player=" + encodeURIComponent(form.player.value);
       $.getJSON(url, function(result) {
           console.log(result);
      $("#results").html(result.text);
           speak(result.text);
       });
  }
  window.go = go;
});
&lt;/script&gt;
&lt;form action="" onsubmit="window.go(this); return false;"&gt;
Player: &lt;input type="text" name="player" value="nadal" /&gt;
  &lt;input type="submit" value="Go" class="button"/&gt;
  &lt;br /&gt;
  Women &lt;input type="checkbox" name="type" value="1" /&gt;
&lt;/form&gt;
&lt;div id="results"&gt;
&lt;/div&gt;
{{/html}}</content>
</xwikidoc>
